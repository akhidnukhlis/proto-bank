syntax = "proto3";

option go_package = ".";

service Document {
    rpc StoreDocument(stream UploadDocRequest) returns (UploadDocResponse);    
    rpc GetDocumentByReffNumber(GetDocumentRequest) returns (GetDocumentResponse);
    rpc UpdateDocumentByReffNumber(UpdateDocumentRequest) returns (UpdateDocumentResponse);
    rpc DeleteDocumentByReffNumber(DeleteDocumentRequest) returns (DeleteDocumentResponse);
}
message Documents {
    string unsigned_doc = 1;
    string signed_doc = 2;
}

message UpdateDocumentRequest {
    string reff_number = 1;
}
message UpdateDocumentResponse { 
    int32 statusCode = 1;    
    string reff_number = 2;
    string title = 3;    
}

message GetDocumentRequest {
    string reff_number = 1;
}

message GetDocumentResponse {
    string reff_number = 1;
    Documents documents = 2;
}

message UploadDocRequest{
    string application_code = 1;    
    string title = 2;
    bytes doc_file = 3;
    string sign_type = 4;
    string doc_flow = 5;
    string doc_category = 6;
    string doc_file_name = 7;
}

message UploadDocResponse {
    int32 statusCode = 1;    
    string reff_number = 2;
    Documents documents = 3;    
}

message DeleteDocumentRequest {
    string reff_number = 1;
}

message DeleteDocumentResponse {
    int32 statusCode = 1;
    bool result = 2;
}

